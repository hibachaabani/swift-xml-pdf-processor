<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="XmlReport" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
    <!-- Paramètres pour la configuration -->
    <parameter name="LABEL_MAPPING" class="java.util.Map"/>
    <parameter name="SECTION_TAGS" class="java.util.Set"/>
    <parameter name="NESTED_STRUCTURE_TAGS" class="java.util.Set"/>
    <parameter name="VALID_FIELDS" class="java.util.Set"/>
    <parameter name="EXCLUDED_TAGS" class="java.util.Set"/>

    <!-- Champs pour les données dynamiques -->
    <field name="sectionName" class="java.lang.String"/>
    <field name="label" class="java.lang.String"/>
    <field name="value" class="java.lang.String"/>
    <field name="indent" class="java.lang.Integer"/>
    <field name="isSection" class="java.lang.Boolean"/>
    <field name="isBold" class="java.lang.Boolean"/>

    <!-- Bande de titre -->
    <title>
        <band height="30">
            <staticText>
                <reportElement x="0" y="0" width="555" height="30"/>
                <textElement>
                    <font size="14" isBold="true"/>
                </textElement>
                <text><![CDATA[XML Report]]></text>
            </staticText>
        </band>
    </title>

    <!-- Bande de détail -->
    <detail>
        <band height="22">
            <!-- Texte pour sections et paires clé-valeur -->
            <textField>
                <reportElement x="0" y="0" width="555" height="20"/>
                <textElement>
                    <font size="12" isBold="$F{isBold}"/>
                </textElement>
                <textFieldExpression><![CDATA["  ".repeat($F{indent}) + ($F{isSection} ? $F{label} + ": -" : $F{label} + ": " + ($F{value} != null ? $F{value} : ""))]]></textFieldExpression>
            </textField>
            <!-- Ligne horizontale pour les sections -->
            <line>
                <reportElement x="0" y="20" width="200" height="1" forecolor="#000000">
                    <printWhenExpression><![CDATA[$F{isSection}]]></printWhenExpression>
                </reportElement>
                <graphicElement>
                    <pen lineWidth="0.5"/>
                </graphicElement>
            </line>
        </band>
    </detail>
</jasperReport>